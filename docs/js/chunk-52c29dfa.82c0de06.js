(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-52c29dfa"],{4665:function(t,e,a){"use strict";a("ee55")},"59f0":function(t,e,a){"use strict";a.r(e);var o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"product-list"},[a("div",{staticClass:"search"},[a("a-form-model",{attrs:{layout:"inline",model:t.searchForm},on:{submit:t.handleSubmit},nativeOn:{submit:function(t){t.preventDefault()}}},[a("a-form-model-item",{attrs:{label:"搜索关键词"}},[a("a-input",{attrs:{placeholder:"请输入关键词"},model:{value:t.searchForm.searchWord,callback:function(e){t.$set(t.searchForm,"searchWord",e)},expression:"searchForm.searchWord"}})],1),a("a-form-model-item",{attrs:{label:"类目"}},[a("a-select",{staticStyle:{width:"200px"},attrs:{"show-search":"",placeholder:"搜索类目",allowClear:""},on:{change:t.handleChange}},t._l(t.categoryList,(function(e){return a("a-select-option",{key:e.id,attrs:{value:e.id}},[t._v(" "+t._s(e.name)+" ")])})),1)],1),a("a-form-model-item",[a("a-button",{attrs:{type:"primary","html-type":"submit"}},[t._v(" 搜索 ")])],1)],1),a("a-button",[a("router-link",{attrs:{to:{name:"ProductAdd"}}},[t._v(" 新增商品 ")])],1)],1),a("a-table",{attrs:{bordered:"",columns:t.columns,"data-source":t.tableData,pagination:t.pageData},on:{change:t.changePage},scopedSlots:t._u([{key:"operate",fn:function(e,o){return[a("div",{staticClass:"operate"},[a("a-button",{staticStyle:{"margin-right":"10px"},attrs:{type:"primary"},on:{click:function(e){return t.editProduct(o.id)}}},[t._v(" 编辑 ")]),a("a-button",{attrs:{type:"danger"},on:{click:function(e){return t.removeProduct(o)}}},[t._v(" 删除 ")])],1)]}}])})],1)},n=[],s=(a("4160"),a("d81d"),a("b0c0"),a("159b"),a("5530")),r=a("4ec3"),i={created:function(){var t=this;r["a"].getCategoryList().then((function(e){"success"===e.status?(t.categoryList=e.data.data,e.data.data.map((function(t){return{status:t.id,name:t.name}})).forEach((function(e){t.codeToName[e.status]=e.name})),console.log(t.codeToName)):t.$message(e.msg)})),this.getProductsList()},data:function(){return{searchForm:{searchWord:"",category:""},categoryList:[],codeToName:[],columns:[{title:"ID",dataIndex:"id"},{title:"标题",dataIndex:"title",width:100,ellipsis:!0},{title:"描述",dataIndex:"desc",width:100,ellipsis:!0},{title:"商品类目",dataIndex:"categoryName",width:100},{title:"商品价格",dataIndex:"price"},{title:"折扣价格",dataIndex:"price_off"},{title:"标签",dataIndex:"tags",width:100,ellipsis:!0},{title:"商品库存量",dataIndex:"inventory"},{title:"上架状态",dataIndex:"statusWord"},{title:"操作",key:"operate",width:200,scopedSlots:{customRender:"operate"}}],tableData:[],pageData:{current:1,pageSize:10,showSizeChanger:!0,total:1}}},methods:{handleSubmit:function(){this.getProductsList()},handleChange:function(t){this.searchForm.category=t},getProductsList:function(){var t=this,e=Object(s["a"])({page:this.pageData.current,size:this.pageData.pageSize},this.searchForm);r["a"].getProducts(e).then((function(a){console.log(e),"success"===a.status&&(console.log(a.data.data),t.tableData=a.data.data.map((function(e){return e.key=e.id,e.categoryName=t.codeToName[e.category],e.statusWord=0===e.status?"下架":"上架",e})),t.pageData.total=a.data.total)}))},changePage:function(t){this.pageData=t,this.getProductsList()},removeProduct:function(t){var e=this,a=this.$createElement;this.$confirm({title:"删除商品",content:function(){return a("div",{style:"color:red;"},["确认删除商品标题为".concat(t.title,"的商品吗？")])},onOk:function(){r["a"].removeProduct(t.id).then((function(t){"success"===t.status&&e.getProductsList()}))},onCancel:function(){return e.$message.warning("您已取消删除商品标题为"+t.title+"的商品！"),!1}})},editProduct:function(t){this.$router.push({name:"ProductEdit",params:{id:t}})}}},c=i,d=(a("4665"),a("2877")),u=Object(d["a"])(c,o,n,!1,null,"12ad31b4",null);e["default"]=u.exports},ee55:function(t,e,a){}}]);
//# sourceMappingURL=chunk-52c29dfa.82c0de06.js.map