{"version":3,"sources":["webpack:///./src/views/page/productList.vue?b3dd","webpack:///./src/views/page/productList.vue?e681","webpack:///src/views/page/productList.vue","webpack:///./src/views/page/productList.vue?c8e5","webpack:///./src/views/page/productList.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","searchForm","on","handleSubmit","nativeOn","$event","preventDefault","model","value","callback","$$v","$set","expression","staticStyle","handleChange","_l","c","key","id","_v","_s","name","columns","tableData","pageData","changePage","scopedSlots","_u","fn","text","record","editProduct","removeProduct","staticRenderFns","created","api","res","status","data","console","log","getProductsList","searchWord","category","categoryList","codeToName","current","pageSize","showSizeChanger","total","methods","val","page","size","params","r","categoryName","statusWord","$confirm","title","content","onOk","onCancel","$router","push","component"],"mappings":"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","file":"js/chunk-52c29dfa.82c0de06.js","sourcesContent":["export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./productList.vue?vue&type=style&index=0&id=12ad31b4&lang=less&scoped=true&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"product-list\"},[_c('div',{staticClass:\"search\"},[_c('a-form-model',{attrs:{\"layout\":\"inline\",\"model\":_vm.searchForm},on:{\"submit\":_vm.handleSubmit},nativeOn:{\"submit\":function($event){$event.preventDefault();}}},[_c('a-form-model-item',{attrs:{\"label\":\"搜索关键词\"}},[_c('a-input',{attrs:{\"placeholder\":\"请输入关键词\"},model:{value:(_vm.searchForm.searchWord),callback:function ($$v) {_vm.$set(_vm.searchForm, \"searchWord\", $$v)},expression:\"searchForm.searchWord\"}})],1),_c('a-form-model-item',{attrs:{\"label\":\"类目\"}},[_c('a-select',{staticStyle:{\"width\":\"200px\"},attrs:{\"show-search\":\"\",\"placeholder\":\"搜索类目\",\"allowClear\":\"\"},on:{\"change\":_vm.handleChange}},_vm._l((_vm.categoryList),function(c){return _c('a-select-option',{key:c.id,attrs:{\"value\":c.id}},[_vm._v(\" \"+_vm._s(c.name)+\" \")])}),1)],1),_c('a-form-model-item',[_c('a-button',{attrs:{\"type\":\"primary\",\"html-type\":\"submit\"}},[_vm._v(\" 搜索 \")])],1)],1),_c('a-button',[_c('router-link',{attrs:{\"to\":{ name: 'ProductAdd' }}},[_vm._v(\" 新增商品 \")])],1)],1),_c('a-table',{attrs:{\"bordered\":\"\",\"columns\":_vm.columns,\"data-source\":_vm.tableData,\"pagination\":_vm.pageData},on:{\"change\":_vm.changePage},scopedSlots:_vm._u([{key:\"operate\",fn:function(text, record){return [_c('div',{staticClass:\"operate\"},[_c('a-button',{staticStyle:{\"margin-right\":\"10px\"},attrs:{\"type\":\"primary\"},on:{\"click\":function($event){return _vm.editProduct(record.id)}}},[_vm._v(\" 编辑 \")]),_c('a-button',{attrs:{\"type\":\"danger\"},on:{\"click\":function($event){return _vm.removeProduct(record)}}},[_vm._v(\" 删除 \")])],1)]}}])})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"product-list\">\r\n    <!-- 搜索 -->\r\n    <div class=\"search\">\r\n      <a-form-model\r\n        layout=\"inline\"\r\n        :model=\"searchForm\"\r\n        @submit=\"handleSubmit\"\r\n        @submit.native.prevent\r\n      >\r\n        <a-form-model-item label=\"搜索关键词\">\r\n          <a-input v-model=\"searchForm.searchWord\" placeholder=\"请输入关键词\"> </a-input>\r\n        </a-form-model-item>\r\n        <a-form-model-item label=\"类目\">\r\n          <a-select\r\n            show-search\r\n            placeholder=\"搜索类目\"\r\n            style=\"width: 200px\"\r\n            @change=\"handleChange\"\r\n            allowClear\r\n          >\r\n            <a-select-option :value=\"c.id\" v-for=\"c in categoryList\" :key=\"c.id\">\r\n              {{ c.name }}\r\n            </a-select-option>\r\n          </a-select>\r\n        </a-form-model-item>\r\n        <a-form-model-item>\r\n          <a-button type=\"primary\" html-type=\"submit\">\r\n            搜索\r\n          </a-button>\r\n        </a-form-model-item>\r\n      </a-form-model>\r\n      <a-button>\r\n        <router-link :to=\"{ name: 'ProductAdd' }\">\r\n          新增商品\r\n        </router-link>\r\n      </a-button>\r\n    </div>\r\n    <!-- 表格 -->\r\n    <a-table\r\n      bordered\r\n      :columns=\"columns\"\r\n      :data-source=\"tableData\"\r\n      :pagination=\"pageData\"\r\n      @change=\"changePage\"\r\n    >\r\n      <template slot=\"operate\" slot-scope=\"text, record\">\r\n        <div class=\"operate\">\r\n          <a-button type=\"primary\" style=\"margin-right: 10px\" @click=\"editProduct(record.id)\">\r\n            编辑\r\n          </a-button>\r\n          <a-button type=\"danger\" @click=\"removeProduct(record)\">\r\n            删除\r\n          </a-button>\r\n        </div>\r\n      </template>\r\n    </a-table>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport api from \"@/api/api\";\r\nexport default {\r\n  created() {\r\n    api.getCategoryList().then(res => {\r\n      if (res.status === \"success\") {\r\n        this.categoryList = res.data.data;\r\n        res.data.data\r\n          .map(r => ({ status: r.id, name: r.name }))\r\n          .forEach(c => {\r\n            this.codeToName[c.status] = c.name;\r\n          });\r\n        console.log(this.codeToName);\r\n      } else {\r\n        this.$message(res.msg);\r\n      }\r\n    });\r\n    this.getProductsList();\r\n  },\r\n  data() {\r\n    return {\r\n      searchForm: {\r\n        searchWord: \"\",\r\n        category: \"\"\r\n      },\r\n      categoryList: [],\r\n      codeToName: [],\r\n      columns: [\r\n        {\r\n          title: \"ID\",\r\n          dataIndex: \"id\"\r\n        },\r\n        {\r\n          title: \"标题\",\r\n          dataIndex: \"title\",\r\n          width: 100,\r\n          ellipsis: true\r\n        },\r\n        {\r\n          title: \"描述\",\r\n          dataIndex: \"desc\",\r\n          width: 100,\r\n          ellipsis: true\r\n        },\r\n        {\r\n          title: \"商品类目\",\r\n          dataIndex: \"categoryName\",\r\n          width: 100\r\n        },\r\n        {\r\n          title: \"商品价格\",\r\n          dataIndex: \"price\"\r\n        },\r\n        {\r\n          title: \"折扣价格\",\r\n          dataIndex: \"price_off\"\r\n        },\r\n        {\r\n          title: \"标签\",\r\n          dataIndex: \"tags\",\r\n          width: 100,\r\n          ellipsis: true\r\n        },\r\n        {\r\n          title: \"商品库存量\",\r\n          dataIndex: \"inventory\"\r\n        },\r\n        {\r\n          title: \"上架状态\",\r\n          dataIndex: \"statusWord\"\r\n        },\r\n        {\r\n          title: \"操作\",\r\n          key: \"operate\",\r\n          width: 200,\r\n          scopedSlots: { customRender: \"operate\" }\r\n        }\r\n      ],\r\n      tableData: [],\r\n      pageData: {\r\n        current: 1,\r\n        pageSize: 10,\r\n        showSizeChanger: true,\r\n        total: 1\r\n      }\r\n    };\r\n  },\r\n  methods: {\r\n    handleSubmit() {\r\n      this.getProductsList();\r\n    },\r\n    handleChange(val) {\r\n      this.searchForm.category = val;\r\n    },\r\n    getProductsList() {\r\n      const params = {\r\n        page: this.pageData.current,\r\n        size: this.pageData.pageSize,\r\n        ...this.searchForm\r\n      };\r\n      api.getProducts(params).then(res => {\r\n        console.log(params);\r\n        if (res.status === \"success\") {\r\n          console.log(res.data.data);\r\n          this.tableData = res.data.data.map(r => {\r\n            r.key = r.id;\r\n            r.categoryName = this.codeToName[r.category];\r\n            r.statusWord = r.status === 0 ? \"下架\" : \"上架\";\r\n            return r;\r\n          });\r\n          this.pageData.total = res.data.total;\r\n        }\r\n      });\r\n    },\r\n    changePage(page) {\r\n      this.pageData = page;\r\n      this.getProductsList();\r\n    },\r\n    removeProduct(record) {\r\n      this.$confirm({\r\n        title: \"删除商品\",\r\n        content: () => (\r\n          <div style=\"color:red;\">{`确认删除商品标题为${record.title}的商品吗？`}</div>\r\n        ),\r\n        onOk: () => {\r\n          api.removeProduct(record.id).then(res => {\r\n            if (res.status === \"success\") {\r\n              this.getProductsList();\r\n            }\r\n          });\r\n        },\r\n        onCancel: () => {\r\n          this.$message.warning(\"您已取消删除商品标题为\" + record.title + \"的商品！\");\r\n          return false;\r\n        }\r\n      });\r\n    },\r\n    editProduct(id) {\r\n      this.$router.push({\r\n        name: \"ProductEdit\",\r\n        params: {\r\n          id\r\n        }\r\n      });\r\n    }\r\n  }\r\n};\r\n</script>\r\n<style lang=\"less\" scoped>\r\n.search {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  width: 100%;\r\n  padding: 10px 30px;\r\n}\r\n</style>\r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./productList.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./productList.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./productList.vue?vue&type=template&id=12ad31b4&scoped=true&\"\nimport script from \"./productList.vue?vue&type=script&lang=js&\"\nexport * from \"./productList.vue?vue&type=script&lang=js&\"\nimport style0 from \"./productList.vue?vue&type=style&index=0&id=12ad31b4&lang=less&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"12ad31b4\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}